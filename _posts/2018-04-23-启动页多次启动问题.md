---
title: 启动页多次启动问题
date: 2018-04-23 11:26
categories: 
- android bug 记录
tag:
- android bug 记录
description: 问题描述：应用安装后弹出完成和打开按钮，选择打开按钮启动App，进入应用操作后，点击home键回到后台，再点击桌面的图标打开应用，启动页再次打开，再次点击home键回到后台，重复上述操作，问题依旧。
---

# 启动页多次启动问题

##  问题描述

应用安装后弹出完成和打开按钮，选择打开按钮启动App，进入应用操作后，点击home键回到后台，再点击桌面的图标打开应用，启动页再次打开，再次点击home键回到后台，重复上述操作，问题依旧。然而当用户“完全退出”应用，或者在安装完成界面直接点击“完成”按钮再从桌面启动，都是不会导致应用程序“多次启动”的。

##  解决方案

> 在启动页的onCreate()方法中添加下列代码即可

```java
if((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0){
    finish();
    return;
}
```



是的！就是这几行代码。之前也是在网上找到的解决方案，但是只有解决方案没有解释原因,简单原因如下：

##  分析

从上边的现象分析，应用只有在首次安装并且点击打开按钮的时候才会出现该问题，

先说结论：

> 利用程序安装器打开程序，启动的Intent是没有带Category，而我们自己打开程序是带了Category，应用安装器打开程序时多了一个`Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT` 







参考：<https://www.aliyun.com/jiaocheng/31423.html>

